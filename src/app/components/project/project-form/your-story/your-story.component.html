<div class="region region-content col-sm-10" [formGroup]="YourStoryForm">
  <div class="your-story">
    <div class="form-group projectName">
      <label for="projectName">Project Name</label>
      <input type="text" class="form-control" id="projectName" ngbTooltip="{{TooltipText.projectName.title}}  {{TooltipText.projectName.guide}}"
        formControlName="title" novalidate placeholder="Project Name">
        <div *ngIf="formErrors.title" class="alert alert-danger error-msg">
          {{ formErrors.title }}
        </div>
    </div>
    <div class="form-group">
      <label for="teaser">Teaser</label>
      <textarea maxlength="250" class="form-control" rows="5" id="teaser" formControlName='field_teaser'></textarea>
    </div>
    {{YourStoryForm.value.field_teaser.length}}\250
    <div *ngIf="formErrors.field_teaser" class="alert alert-danger error-msg">
      {{ formErrors.field_teaser }}
    </div>
    <div class="form-group cover d-flex flex-column">
      <label class="control-label">Cover photo</label><br>
      <div class="d-flex flex-row align-items-start">
        <a (click)="OpenCoverImageModal(coverimagemodal)" id="cover-upload-link" class="btn btn-white btn-sharp">Choose</a>
        <!--<input id="cover-upload" type="file" class="file" placeholder="Cover" (change)="ImageUpdated($event)" >-->
        <div class="image-preview">
          <p *ngIf="!YourStoryForm.value.field_cover_photo.file">choose a photo that is at least 600 x 400 px</p>
          <img *ngIf="YourStoryForm.value.field_cover_photo.file" src="{{YourStoryForm.value.field_cover_photo.file}}" class="img-responsive">
        </div>
      </div>
      <div *ngIf="formErrors.field_cover_photo" class="alert alert-danger error-msg">
        {{ formErrors.field_cover_photo }}
      </div>
    </div>
    <div class="form-group projectCategory d-flex flex-column">
      <label for="projectCategory" class="">Categories</label>
      <div class="categories-group d-flex flex-row row">
        <div class="col-md-4">
          <select #parentcategory class="form-control" type="text" class="form-control" id="projectCategoryParent" (change)="SelectTerm($event.target.value,'parent')">
            <option disabled selected value="_none_"> -- select an option -- </option>
            <option *ngFor="let parent_category of project_categories_parents; let i=index" value="{{parent_category.tid}}" [innerHTML]="parent_category.name"></option>
          </select>
        </div>
        <div class="col-md-4">
          <select *ngIf="current_parent_category" class="form-control" type="text" class="form-control" id="projectCategoryChildren"
            (change)="SelectTerm($event.target.value,'child')">
            <option disabled selected value> -- select an option -- </option>
            <option *ngFor="let child_category of child_categories; let i=index" value="{{child_category.tid}}" [innerHTML]="child_category.name"></option>
            </select>
        </div>
        <div *ngIf="current_child_category" (click)="SetCategories(parentcategory)" class="btn btn-main add-cate col-md-2">add</div>
      </div>
    </div>
    <div class="d-flex flex-column cate-list row">
      <div *ngIf="formErrors.field_categories" class="alert alert-danger error-msg col-md-12">
        {{ formErrors.field_categories }}
      </div>
      <div *ngIf="project.field_categories.und" class="cate-list">
        <div *ngFor="let selected_cate of project.field_categories.und; let i=index">
          <div *ngFor="let cate of all_categories;" class="">
            <p *ngIf="cate.parent_tid && selected_cate == cate.tid" class="cate-name list-group-item"><span [innerHTML]="cate.parentName"></span> &nbsp; > <span [innerHTML]="cate.name"></span></p>
          </div>
        </div>
      </div>
    </div>
    <div class="form-group project-story">
      <label for="project-story">Story</label>
      <ckeditor rows="5" id="project-story" [config]="{extraPlugins: 'divarea'}" formControlName='field_story'></ckeditor>
      <div *ngIf="formErrors.field_story" class="alert alert-danger error-msg">
        {{ formErrors.field_story }}
      </div>
    </div>
    <div class="form-group show-tell">
      <label for="show-tell">Show &amp; Tell Video (optional)</label>
      <input type="text" class="form-control" id="show-tell" placeholder="Enter a URL for video" formControlName='field_show_tell_video'>
      <div *ngIf="formErrors.field_show_tell_video" class="alert alert-danger error-msg">
        {{ formErrors.field_show_tell_video }}
      </div>
    </div>
    <div class="form-group aha">
      <label for="aha">AHA Moment (optional)</label>
      <input maxlength="350" type="text" class="form-control" id="aha" placeholder="Enter your text" formControlName='field_aha_moment'>
         {{YourStoryForm.value.field_aha_moment.length}}\350
      <div *ngIf="formErrors.field_aha_moment" class="alert alert-danger error-msg">
      {{ formErrors.field_aha_moment }}
    </div>
    </div>
     
    <div class="form-group uh-oh">
      <label for="uh-oh">UH-OH Moment (optional)</label>
      <input maxlength="350" type="text" class="form-control" id="uh-h" placeholder="Enter your text" formControlName='field_uh_oh_moment'>
      {{YourStoryForm.value.field_uh_oh_moment.length}}\350

       <div *ngIf="formErrors.field_uh_oh_moment" class="alert alert-danger error-msg">
      {{ formErrors.field_aha_moment }}
    </div>
    </div>
     
    <div class="form-group projectTags">
      <label for="projectTags">Tags</label>
      <tag-input type="text" class="form-control" id="projectTags" placeholder="Tags" formControlName='field_tags' [modelAsStrings]="true"
        [(ngModel)]="tags"></tag-input>
    </div>
  </div>
  <!-- End your-story -->
</div>
<!--
<aside class="col-md-4">
  <div class="your-story-guide">
    <div class="guideline">
      <div class="pull-left question-mark"><i class="fa fa-2x fa-question-circle"></i></div>
      <div class="pull-left content">
        <h4>How to Choose a Project Name:</h4>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perferendis voluptates magni ducimus id quos, fugiat repellat harum reprehenderit, laborum est officiis distinctio veniam nulla facere!</p>
      </div>
    </div>
    <div class="guideline">
      <div class="pull-left question-mark"><i class="fa fa-2x fa-question-circle"></i></div>
      <div class="pull-left content">
        <h4>Choosing a category</h4>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
      </div>
    </div>
    <div class="guideline">
      <div class="pull-left question-mark"><i class="fa fa-2x fa-question-circle"></i></div>
      <div class="pull-left content">
        <h4>Writing a teaser:</h4>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
      </div>
    </div>
    <div class="guideline">
      <div class="pull-left question-mark"><i class="fa fa-2x fa-question-circle"></i></div>
      <div class="pull-left content">
        <h4>Making an awesome SHOW &amp; TELL video:</h4>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perferendis voluptates magni ducimus id quos, fugiat repellat harum reprehenderit, laborum est officiis distinctio veniam nulla facere!</p>
        <img src="./assets/images/video_placeholder.jpg" alt="" class="img-responsive">
      </div>
    </div>
    <div class="guideline">
      <div class="pull-left question-mark"><i class="fa fa-2x fa-question-circle"></i></div>
      <div class="pull-left content">
        <h4>AHA ad UH-OH Moments</h4>
        <p>Talk about a positive breakthrough you had while working on the project, or a learning experience or something that went horribly, horribly wrong...</p>
      </div>
    </div>
    <div class="guideline">
      <div class="pull-left question-mark"><i class="fa fa-2x fa-question-circle"></i></div>
      <div class="pull-left content">
        <h4>Tips for creating a great story:</h4>
        <p>Tell us about your project.</p>
        <p>Think about: What does your project do? How did you get started? What was your process for working on it? What did you learn by making it? How do people react to your project? If the project didn’t turn out the way you planned, what did you learn from your “failure”?</p>
        <p>Definitely include a video and photos of the finished product. </p>
      </div>
    </div>
  </div>
</aside>
 -->

<!--Cover image modal-->
<template #coverimagemodal let-c="close" let-d="dismiss" ngbModalContainer>
  <div class="modal-header">
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="file-upload">
      <a class="btn btn-white btn-sharp" (click)="file.click()">Upload</a>
      <input id="custom-upload" class="hidden-xs-up" type="file" #file (change)="UploadBtn($event,imagecropper)">
    </div>
    <img-cropper #imagecropper [image]="imagedata" [settings]="cropperSettings"></img-cropper>
  </div>
  <div class="modal-footer">
    <button #closebtn type="button" class="btn btn-secondary" (click)="c('Close click')">Close</button>
    <button type="button" class="btn btn-primary" (click)="ImageUpdated(closebtn,true)">Skip</button>
    <button type="button" class="btn btn-primary" (click)="ImageUpdated(closebtn,false)">Save</button>
  </div>
</template>