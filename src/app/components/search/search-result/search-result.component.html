<ng-template #rt let-r="result" let-t="term">
  <div class="data-container">
    <div *ngIf="r">{{r}}</div>
  </div>
</ng-template>

<section class="page-search-content">
  <div class="top-content-wrapper">
    <div class="container">
      <p class="page-title">Search Results</p>
      <div class="row d-flex">
        <div class="searsh-field col-lg-4">
          <div id="imaginary_container">
            <div class="input-group stylish-input-group">
              <input [(ngModel)]="query" type="text" (input)="query = $event.target.value" class="form-control" id="search-input" placeholder="Start typing..."
                [ngbTypeahead]="search" [focusFirst]="false" (keyup.enter)="searchQuery()" [resultTemplate]="rt" (selectItem)="itemSelected($event.item)">
              <span class="clear-search" [hidden]="query == ''" (click)="clearQuery()" value="clear">
                <i class="lnr lnr-cross"></i>
             </span>
             <span class="input-group-addon">
                <button type="button" (click)="searchURL('')" value="search">
                  <i class="lnr lnr-magnifier"></i>
                </button>  
             </span>
              <!--<div class="search-term">
                <h3 *ngIf="searchTerm">"{{searchTerm}}"</h3>
              </div>-->
            </div>
          </div>
        </div>
        <div class="checkbox-filters col-md-8">
          <label class="pull-left p-2 m-1">Filter:</label>
          <div class="filter pull-left p-2 m-1">
            <label><input (change)="CheckFilter()" [(ngModel)]="filter.projects" class="mr-2" type="checkbox" name="projects-filter" value="Bike">Projects</label>
          </div>
          <div class="filter pull-left p-2 m-1">
            <label><input (change)="CheckFilter()" [(ngModel)]="filter.showcases" class="mr-2" type="checkbox" name="showcases-filter" value="Bike">Showcases</label>
          </div>
          <div class="filter pull-left p-2 m-1">
            <label><input (change)="CheckFilter()" [(ngModel)]="filter.challenges" class="mr-2" type="checkbox" name="challenges-filter" value="Bike">Missions</label>
          </div>
          <div class="filter pull-left p-2 m-1 disabled">
            <label><input (change)="CheckFilter()" [(ngModel)]="filter.learning" class="mr-2" type="checkbox" name="learning-filter" value="Bike" disabled>Learning</label>
          </div>
          <div class="filter pull-left p-2 m-1">
            <label><input (change)="CheckFilter()" [(ngModel)]="filter.makers" class="mr-2" type="checkbox" name="makers-filter" value="Bike">Makers</label>
          </div>
        </div>
        <!--<div class="sort col-lg-4">
        </div>-->
      </div>
    </div>
    <!-- End container -->
  </div>
  <!-- End top-content-wrapper -->
  <div class="container">
    <div class="region region-content ">
      <div class="row total-result">
        <!-- Projects -->
        <div *ngIf="projects.length > 0" class="col-md-12 project-result result-section">

          <div class="results-header d-flex justify-content-start  mb-3">
            <div class="result-title mr-auto"><span>Projects</span></div>
            <div class="view-all-result">
              <span *ngIf="projectsCount > 1">{{projectsCount}} Results</span>
              <span *ngIf="projectsCount == 1">{{projectsCount}} Result</span>                
              <a *ngIf="projectsCount > projectsCountQuery" (click)="searchTypeNavigate('project')"> | View All</a></div>
          </div>
          <div class="row projects-result">
            <app-project-search-card *ngFor="let project of projects" [view]="project_view" [nid]="project.is_nid" class="col-md-6 col-lg-4 pull-left"></app-project-search-card>
          </div>
        </div>

        <!-- Showcases -->
        <div *ngIf="showcases.length > 0" class="col-md-12 showcase-result result-section">

          <div class="results-header d-flex justify-content-start  mb-3">
            <div class="result-title mr-auto"><span>Showcases</span></div>
            <div class="view-all-result">
              <span *ngIf="showcasesCount > 1">{{showcasesCount}} Results</span>
              <span *ngIf="showcasesCount == 1">{{showcasesCount}} Result</span>              
              <a *ngIf="showcasesCount > showcasesCountQuery" (click)="searchTypeNavigate('showcase')"> | View All</a></div>
          </div>
          <div class="row projects-result">
            <app-showcase-search-card *ngFor="let showcase of showcases" [showcaseNid]="showcase.is_nid" class="col-lg-4 col-md-6 col-sm-12 pull-left"></app-showcase-search-card>
          </div>
        </div>

        <!-- Challenges -->
        <div *ngIf="challenges.length > 0" class="col-md-12 challenge-result result-section">

          <div class="results-header d-flex justify-content-start  mb-3">
            <div class="result-title mr-auto"><span>Missions</span></div>
            <div class="view-all-result">
              <span *ngIf="challengesCount > 1">{{challengesCount}} Results</span>
              <span *ngIf="challengesCount == 1">{{challengesCount}} Result</span>
              <a *ngIf="challengesCount > challengesCountQuery" (click)="searchTypeNavigate('challenge')"> | View All</a></div>
          </div>
          <div class="row projects-result">
            <app-challenge-search-card *ngFor="let challenge of challenges" [challengeNid]="challenge.is_nid" class="col-lg-4 col-md-6 col-sm-12 pull-left"></app-challenge-search-card>
          </div>
        </div>

        <!-- Learning -->
        <!--<div *ngIf="workshops.length > 0" class="col-md-12 workshop-result result-section">

          <div class="results-header d-flex justify-content-start  mb-3">
            <div class="result-title mr-auto"><span>Workshops</span></div>
            <div class="view-all-result">
              <span *ngIf="workshopsCount > 1">{{workshopsCount}} Results</span>
              <span *ngIf="workshopsCount == 1">{{workshopsCount}} Result</span>               
              <a *ngIf="workshopsCount > workshopsCountQuery" (click)="searchTypeNavigate('learning_sequence')"> | View All</a></div>
          </div>
          <div class="row projects-result">
            <app-learn-search-card *ngFor="let learn of workshops" [workshopNid]="learn.is_nid" class="col-lg-4 col-md-6 col-sm-12 pull-left"></app-learn-search-card>
          </div>
        </div>-->

        <!-- Users -->
        <div *ngIf="users.length > 0" class="col-md-12 maker-result result-section">
          <div class="results-header d-flex justify-content-start mb-3">
            <div class="result-title mr-auto"><span>Makers</span></div>
            <div class="view-all-result">
              <span *ngIf="usersCount > 1">{{usersCount}} Results</span>
              <span *ngIf="usersCount == 1">{{usersCount}} Result</span>
              <a *ngIf="usersCount > usersCountQuery" (click)="searchTypeNavigate('maker')"> | View All</a></div>
          </div>
          <div class="row projects-result">
            <app-maker-search-card *ngFor="let user of users" [uid]="user.is_uid" class="col-md-6 col-lg-4 pull-left"></app-maker-search-card>
          </div>
        </div>


        <div *ngIf="ShowEmptyResult()" class="col-md-12 maker-result result-section" style="margin-top: 70px;">
          <h4 class="text-center">No Results.</h4>
        </div>

      </div>
    </div>
  </div>
</section>