<div class="col-md-8"
     [formGroup]="organizationForm">

  <div class="form-group required">
    <div class="form-label">
      <label for="orgName">Organization Name</label>
    </div>
    <div class="form-ctl">
      <input type="text"
             [ngClass]="{valError: !organizationForm.controls['title'].valid}"
             formControlName="title"
             placeholder="Enter name here"
             maxlength="50"
             validate-onfocusout
             id="orgName">
    </div>
  </div>

  <div class="form-group">
    <div class="form-label">
      <label>Organization Type</label>
    </div>
    <div class="form-ctl">
      <input type="radio"
             name="field_orgs_type"
             value="non-profit"
             id="type-non-profit"
             [checked]="organizationForm.value.field_orgs_type === 'non-profit'"
             (click)="updateType($event.target.value)">
      <label for="type-non-profit">non-profit</label>
    </div>
    <div class="form-ctl">
      <input type="radio"
             name="field_orgs_type"
             value="startup"
             id="type-startup"
             class="form-ctl"
             [checked]="organizationForm.value.field_orgs_type === 'startup'"
             (click)="updateType($event.target.value)">
      <label for="type-startup">startup</label>
    </div>
  </div>

  <div class="form-group">
    <div class="form-label">
      <label>Organization Logo</label>
      <span>logo must work at small size (20 x 20)</span>
    </div>
    <div>
      <button class="btn btn-grey -slim"
              (click)="openImageModal(imagemodal, cropperLogoSettings, 'field_orgs_logo')">Choose</button>
      <div>
        <img *ngIf="organizationForm.value.field_orgs_logo.file"
             [src]="organizationForm.value.field_orgs_logo.file">
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="form-label">
      <label>Cover Photo</label>
      <span>For the top of the profile page (at least 300 x 2000)</span>
    </div>
    <div>
      <button class="btn btn-grey -slim"
              (click)="openImageModal(imagemodal, cropperCoverSettings, 'field_orgs_cover_photo')">Choose</button>
      <div>
        <img *ngIf="organizationForm.value.field_orgs_cover_photo.file"
             [src]="organizationForm.value.field_orgs_cover_photo.file">
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="form-label">
      <label>Organization Avatar</label>
      <span>Should be at max 104px square</span>
    </div>
    <div>
      <button class="btn btn-grey -slim"
              (click)="openImageModal(imagemodal, cropperCoverSettings, 'field_org_avatar')">Choose</button>
      <div>
        <img *ngIf="organizationForm.value.field_org_avatar.file"
             [src]="organizationForm.value.field_org_avatar.file">
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="form-label">
      <label>Social Channels</label>
    </div>
  </div>

  <div class="form-group">
    <div class="form-label">
      <label for="website">Website</label>
    </div>
    <div class="form-ctl">
      <input type="url"
             placeholder="http://"
             id="website"
             formControlName="field_orgs_contact">
    </div>
  </div>

  <div class="form-group">
    <div class="form-label">
      <label>Contact email</label>
    </div>
    <div class="form-ctl">
      <input type="text"
             formControlName="field_orgs_contact">
    </div>
  </div>

  <div class="form-group">
    <div class="form-label">
      <label for="phone">Phone</label>
    </div>
    <div class="form-ctl">
      <input type="tel"
             id="phone"
             formControlName="field_orgs_phone">
    </div>
  </div>

  <div class="form-group">
    <div class="form-label">
      <label for="founder_name">Founder Name</label>
    </div>
    <div class="form-ctl">
      <input type="text"
             placeholder="Enter name here"
             id="founder_name"
             formControlName="field_founder_name">
    </div>
  </div>

  <div class="form-group"
       formGroupName="field_founded_date">
    <div class="form-label">
      <label for="founded_date">Founded Date</label>
    </div>
    <div class="form-ctl">
      <input type="number"
             max=""
             id="founded_date"
             formControlName="date">
    </div>
  </div>

  <div class="form-group">
    <div class="form-label">
      <label for="business_type">Type of Business</label>
    </div>
    <div class="form-ctl">
      <input type="text"
             id="business_type"
             formControlName="field_type_of_business">
    </div>
  </div>

  <div class="form-group">
    <div class="form-label">
      <label>Display only after there are more than</label>
    </div>
    <div class="form-ctl">
      <input type="number" formControlName="field_minimum_number_of_follower">
    </div>
  </div> 

  <div formGroupName="field_orgs_address">
    <label>Country</label>
    <input type="text" formControlName="countryName" [inputFormatter]="formatter" [ngbTypeahead]="searchCountry" [resultTemplate]="countryrt" (selectItem)="getCountryDetails($event.item)">
    <div *ngIf="selectedCountry">

      <div>
        <label>Address 1</label>
        <input type="text" formControlName="thoroughfare">
      </div> 

      <div>
        <label>Address 2</label>
        <input type="text" formControlName="premise">
      </div> 

      <div *ngIf="selectedCountry.used_fields.indexOf('administrative_area') != -1">
        <label>{{selectedCountry.administrative_area_label}}</label>
        <select formControlName="administrative_area">
          <option *ngFor="let governerate of selectedCountry.administrative_areas" [value]="governerate.key">{{governerate.value}}</option>
        </select>
      </div>

      <div *ngIf="selectedCountry.used_fields.indexOf('locality') != -1">
        <label>{{selectedCountry.locality_label}}</label>
        <input type="text" formControlName="locality">
      </div>

      <div *ngIf="selectedCountry.used_fields.indexOf('dependent_locality') != -1">
        <label>District</label>
        <input type="text" formControlName="dependent_locality">
      </div>      

      <div *ngIf="selectedCountry.used_fields.indexOf('postal_code') != -1">
        <label>{{selectedCountry.postal_code_label}}</label>
        <input type="number" formControlName="postal_code">
      </div> 

    </div>
  </div>
  
  <div formGroupName="field_social_accounts">
    <label>Social Channels</label>
    <div>
      <div>
        <label>Facebook</label>
        <input type="text" formControlName="field_facebook" add-protocol>
      </div>
      <div>
        <label>linkedin</label>
        <input type="text" formControlName="field_linkedin" add-protocol>
      </div>
      <div>
        <label>pinterest</label>
        <input type="text" formControlName="field_pinterest" add-protocol>
      </div>
      <div>
        <label>instagram</label>
        <input type="text" formControlName="field_instagram" add-protocol>
      </div>
      <div>
        <label>twitter</label>
        <input type="text" formControlName="field_twitter" add-protocol>
      </div>
      <div>
        <label>github</label>
        <input type="text" formControlName="field_github" add-protocol>
      </div>
      <div>
        <label>kickstarter</label>
        <input type="text" formControlName="field_kickstarter" add-protocol>
      </div>
      <div>
        <label>etsy_shop</label>
        <input type="text" formControlName="field_etsy_shop" add-protocol>
      </div>
    </div>
  </div>
</div>

<!--Cover image modal-->
<ng-template #imagemodal let-c="close" let-d="dismiss">
  <div class="upload-image-modal">
    <div class="modal-header">
      <button type="button"
              class="close ml-auto"
              #closebtn
              aria-label="Close"
              (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

    <div>
      <ul>
        <li (click)="imageModalTab = 'upload'">
          <a>Upload</a>
        </li>
        <li (click)="imageModalTab = 'filemanager'">
          <a>Your Photos</a>
        </li>
      </ul>
    </div>
    <div class="modal-body">
      <div class="container">
        <div [hidden]="imageModalTab != 'upload'" ng2FileDrop
             (ng2FileDropFileAccepted)="dragFileAccepted($event,imagecropper)">
          <div>
            <img *ngIf="!imageData.original"
                 src="./assets/images/icons/Photos Icon.png">
            <img-cropper [hidden]="!imageData.original" #imagecropper [image]="imageData"
                         [settings]="cropperSettings"></img-cropper>
            <a (click)="file.click()">
              <span *ngIf="imageData.original">{{imageData.original ? 'Choose a Different Photo' : 'Choose'}}</span>
              <input [hidden]="true"
                     type="file" #file
                     (change)="uploadBtn($event.target.files[0], imagecropper)">
            </a>
          </div>
        </div>
        <app-file-browser *ngIf="imageModalTab == 'filemanager'"
                          (emitter)="selectFileAndSave(closebtn,$event)"></app-file-browser>
      </div>
    </div>
    <div class="modal-footer">
      <button *ngIf="imageModalTab == 'upload'"
              (click)="imageUpdated(closebtn, file.files[0])">Save
      </button>
    </div>
  </div>
</ng-template>

<ng-template #countryrt let-r="result" let-t="term">
  <div class="data-container">
    {{r.value}}
  </div>
</ng-template>