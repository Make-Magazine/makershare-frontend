<div *ngIf="project" class="card project {{state}} {{clickAction != null ? 'allow-cta' : ''}}">
  <!--(click)="clickItem()"-->
  <div class="card-image" [style.background-image]="'url('+project.cover_photo+')'"></div>
  <!-- <img *ngIf="project.orgs_logo" class="card-org-logo" src="{{project.orgs_logo}}" alt=""> -->


  <!-- <div class="badge badge-default" >

 </div>  -->
  <div class="card-info">
    <div class="info-top">
      <div class="card-image alt" [style.background-image]="'url('+project.cover_photo+')'"></div>
      <!-- no alt bg for projects but we still need the div here for hovers -->
      <div class="flag project">project</div>
      <!-- Start Feature Project -->
      <app-feature *ngIf="Manager && project.nid" [id]="project.nid" [type]="'node'" (Featured)="emitFeatured()"></app-feature>
      <!-- End Feature Project -->
      <app-card-badges [badges]="badges"></app-card-badges>

      <div class="float-right" *ngIf="project.orgs_logo">
        <img class="orgs-logo" src="{{project.orgs_logo}}" alt="">
      </div>
      <a class="flex-text-container"
         [routerLink]="['/projects/', project.path]"
         *ngIf="!editMode">
        <p class="card-description-long" *ngIf="project.teaser" innerHTML="{{project.teaser}}"></p>
        <p class="card-description-long" *ngIf="project.challenge_name"> Entered in <a (click)="challengePage(project.challenge_nid)">{{project.challenge_name}}</a></p>
      </a>
      <div class="flex-text-container" *ngIf="editMode">
        <div class="overlay-portfolio" [routerLink]="['/projects/', project.path]"></div>
        <div class="profile-edit-buttons">
          <div class=" d-flex flex-column m-auto">
            <p [routerLink]="['/projects/',project.path,'edit']" class="btn edit-project">
              <span>Edit Project</span>
            </p>
            <div class="d-flex">
              <div *ngIf="visibility != 1115" class="d-flex flex-column">
                <p [ngClass]="{'active' : visibility == 371}" (click)="updateProjectVisibility(371)" class="btn project-private">
                  <i class="fa fa-lg fa-eye-slash"></i>
                  <span>PRIVATE</span>
                </p>
              </div>
              <div *ngIf="visibility != 1115" class="d-flex flex-column">
                <p [ngClass]="{'active' : visibility == 370}" (click)="updateProjectVisibility(370)" class="btn project-public">
                  <i class="fa fa-lg fa-eye"></i>
                  <span>PUBLIC</span>
                </p>
              </div>
              <div class="d-flex flex-column ml-auto" *ngIf="org_data && visibility == 370 && userId==project.uid">
                <p (click)="setProjectonOrgs()" class="btn ml-auto">
                  <span *ngIf="!inOrg">Add to Org</span>
                  <span *ngIf="inOrg">Remove From Org</span>
                </p>
              </div>
              <div class="d-flex flex-column ml-auto">
                <p (click)="openModal(confirmdelete)" class="btn ml-auto project-delete">
                  <i class="fa fa-lg fa-times"></i>
                  <span>DELETE</span>
                </p>
              </div>
            </div>
            <p class="project-drag">
              <i class="fa fa-lg fa-arrows-alt"></i> Drag Project Tile To Reorder
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="info-bottom">
      <div class="card-owner-meta">
        <img class="card-owner-media"[routerLink]="[project.maker_url]"  src="{{project.maker_photo}}" />
        <div class="card-owner-meta-info">
          <span class="card-title" [routerLink]="['/projects/', project.path]" innerHTML="{{project.project_name}}"></span>
          <div class="card-owners-group">
            <a class="card-owner-link"
               [routerLink]="[project.maker_url]"
               innerHTML="By {{project.first_name}} {{project.last_name}}"></a>
          </div>
        </div>
      </div>
      <social-stats [profileViews]="project.number_of_views" [uid]="project.nid" [like]="true" [nid]="project.nid"></social-stats>
    </div>
  </div>
</div>

<ng-template #confirmdelete let-c="close" let-d="dismiss">
  <div class="modal-header">
    <button type="button" class="close" (click)="d('Cross click')" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <h5 class="control-label">Your project will be deleted. This cannot be undone.</h5>
    </div>
  </div>
  <div class="modal-footer">
    <a [hidden]="true" #close class="btn btn-transparent" (click)="c('Close click')">Cancel</a>
    <button class="button lt-grey" (click)="deleteProject(close)">Ok</button>
    <button class="button lt-grey" (click)="updateProjectVisibility(1115,close)">Save as draft</button>
  </div>
</ng-template>